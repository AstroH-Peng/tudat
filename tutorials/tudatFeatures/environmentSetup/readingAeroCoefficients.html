

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.3. Reading Aerodynamic Coefficients From Files &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="3. Environment Set-up" href="index.html"/>
        <link rel="next" title="4. Acceleration Set-Up" href="../accelerationSetup/index.html"/>
        <link rel="prev" title="3.2. Environment Valid Time-range" href="validTimeRange.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../prerequiredKnowledge/index.html">Pre-required Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Walkthroughs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">1. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">2. Basic Mathematics Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">3. Environment Set-up</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="frameworkEnvironmentModels.html">3.1. Implementation Framework of the Environment Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="validTimeRange.html">3.2. Environment Valid Time-range</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.3. Reading Aerodynamic Coefficients From Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">4. Acceleration Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">5. Propagation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">6. Other Libraries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html">3. Environment Set-up</a> &raquo;</li>
        
      <li>3.3. Reading Aerodynamic Coefficients From Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/environmentSetup/readingAeroCoefficients.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reading-aerodynamic-coefficients-from-files">
<span id="tudatfeaturesreadingaerocoefficients"></span><h1>3.3. Reading Aerodynamic Coefficients From Files<a class="headerlink" href="#reading-aerodynamic-coefficients-from-files" title="Permalink to this headline">¶</a></h1>
<p>For many simulations/analyses involving atmospheric flight, the aerodynamic coefficients will be provided in tabulated form. If put into the correct file format, these files can be read into Tudat used during the orbit propagation. By specifying the physical meaning of the independent variables of the aerodynamic coefficients, no action on the side of the user is required to update the aerodynamic coefficients to their correct values during propagation. Here, we give an overview and some examples on how to load aerodynamic coefficients from a file.</p>
<div class="section" id="loading-the-coefficient-settings">
<h2>3.3.1. Loading the coefficient settings<a class="headerlink" href="#loading-the-coefficient-settings" title="Permalink to this headline">¶</a></h2>
<p>As a reminder, aerodynamic coefficients are created in Tudat by creating an object of type&nbsp;<code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code>:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="p">.....</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
                    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>To create an&nbsp;<code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code>&nbsp;object from data in files, we provide two functions named&nbsp;<code class="docutils literal"><span class="pre">readTabulatedAerodynamicCoefficientsFromFiles</span></code>&nbsp;(in <code class="docutils literal"><span class="pre">createFlightConditions.h</span></code>). For one of the functions, only force coefficients are loaded (with moment coefficients set to zero at all times). The other function allows both force and moment coefficients to be loaded.</p>
<p>For the situation where only force coefficients are considered, several pieces information are needed:</p>
<blockquote>
<div><ul class="simple">
<li>A list of files for any of the three aerodynamic coefficients (e.g. C_D, C&nbsp;S, C&nbsp;L&nbsp;or C&nbsp;X, C&nbsp;Y, C&nbsp;Z). Note that the behaviour of each coefficient must be provided in a&nbsp;separate file. Note that not every coefficient needs to be defined. If a file is not provided for one of the coefficients, as will often be the case for C&nbsp;S, zeros are assumed at all points in the propagation.</li>
<li>The physical meaning of each of the independent variables of the coefficients.</li>
<li>The reference area for the aerodynamics. This is&nbsp;not&nbsp;read from the file and must be provided as an input to the function.</li>
<li>Two booleans denoting the orientation and direction of the aerodynamic coefficients. For instance C&nbsp;D, C&nbsp;S, C&nbsp;L&nbsp;denote the strength of the aerodynamic force in the aerodynamic reference frame, in a direction opposite to the axes of that frame. The C&nbsp;X, C&nbsp;Y, C&nbsp;Z&nbsp;coefficients, on the other hand, are defined in the body-fixed frame.</li>
</ul>
</div></blockquote>
<p>As an example, the following can be used to create&nbsp;AerodynamicCoefficientSettings&nbsp;for force coefficients only from a file:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">referenceArea</span> <span class="o">=</span> <span class="mf">50.0</span><span class="p">;</span> <span class="c1">// Define reference area</span>

<span class="c1">// Define physical meaning of independent variables, in this case Mach number and angle of attack</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">AerodynamicCoefficientsIndependentVariables</span> <span class="o">&gt;</span> <span class="n">independentVariableNames</span><span class="p">;</span>
<span class="n">independentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">mach_number_dependent</span> <span class="p">);</span>
<span class="n">independentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">angle_of_attack_dependent</span> <span class="p">);</span>

<span class="c1">// Define list of files for force coefficients. Entry 0 denotes the x-direction (C ~D~/C ~X~), 1 the y-direction (C ~S~/C ~Y~) and 2 the z-direction (C ~L~/C ~Z~)</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">forceCoefficientFiles</span><span class="p">;</span>
<span class="n">forceCoefficientFiles</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/aurora_CD.txt&quot;</span><span class="p">;</span> <span class="c1">// Set drag coefficient file</span>
<span class="n">forceCoefficientFiles</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/aurora_CL.txt&quot;</span><span class="p">;</span> <span class="c1">// Set lift coefficient file</span>

<span class="c1">// Define reference frame in which the loaded coefficients are defined.</span>
<span class="kt">bool</span> <span class="n">areCoefficientsInAerodynamicFrame</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">areCoefficientsInNegativeAxisDirection</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

<span class="c1">// Load and parse files; create coefficient settings.</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span>
    <span class="n">readTabulatedAerodynamicCoefficientsFromFiles</span><span class="p">(</span> <span class="n">forceCoefficientFiles</span><span class="p">,</span> <span class="n">referenceArea</span><span class="p">,</span> <span class="n">independentVariableNames</span><span class="p">,</span> <span class="n">areCoefficientsInAerodynamicFrame</span><span class="p">,</span>         <span class="n">areCoefficientsInNegativeAxisDirection</span> <span class="p">);</span>

<span class="c1">// Create and set aerodynamic coefficients</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
                    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that in the above, not side force coefficient file (entry 1 for forceCoefficientFiles) is given, so that C&nbsp;S=0 always. Two independent variables have been defines (Mach number and angle of attack). If either the lift or drag coefficient files encounter a different number of independent variables, the program will terminate with an appropriate error message. Also, if the independent variables used for the lift and drag coefficients are not identical, the program is terminated.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Moment coefficients are added in a completely analogous manner (with separate files for the x-, y- and z-components).</p>
</div>
</div>
<div class="section" id="adding-control-surface-influence">
<h2>3.3.2. Adding control surface influence<a class="headerlink" href="#adding-control-surface-influence" title="Permalink to this headline">¶</a></h2>
<p>In addition to defining aerodynamic coefficients for the vehicle itself, the influence of control surface deflections on the values of the coefficients will be needed for certain applications. In Tudat, any number of control surfaces may be defined for a vehicle, the deflection of which may be set by your particular guidance model (see&nbsp;here). Loading the aerodynamic coefficient increments of the control surface is done in a manner similar to those of the total vehicle, but:</p>
<blockquote>
<div><ul class="simple">
<li>Reference area and reference frame in which the coefficients are defined are not provided. These are implcitily assumed to be equal to those of the aerodynamic coefficients of the ‘main body’. If your application requires these quantities to be different for the body and control surface deflections, please open an issue on Github requesting the functionality.</li>
<li>Exactly one of the independent variables of the coefficient increments must be a control surface deflection.</li>
</ul>
</div></blockquote>
<p>Below, an example is given on how to load the aerodynamic coefficient increments:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Create coefficient settings for body.</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// Define physical meaning of independent variables for control surface increments, in this case Mach number, angle of attack and control surface deflection</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">AerodynamicCoefficientsIndependentVariables</span> <span class="o">&gt;</span> <span class="n">controlSurfaceIndependentVariableNames</span><span class="p">;</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">mach_number_dependent</span> <span class="p">);</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">angle_of_attack_dependent</span> <span class="p">);</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">control_surface_deflection_dependent</span> <span class="p">);</span>

<span class="c1">// Define name of control surface</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">controlSurfaceName</span> <span class="o">=</span> <span class="s">&quot;Elevon&quot;</span><span class="p">;</span>

<span class="c1">// Define list of files for force coefficients.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">;</span>
<span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/dCDwTest.txt&quot;</span><span class="p">;</span> <span class="c1">// Set drag coefficient file</span>

<span class="c1">// Add settings for control surface increments to main aerodynamic coefficients</span>
<span class="n">aerodynamicCoefficientSettings</span><span class="o">-&gt;</span><span class="n">setControlSurfaceSettings</span><span class="p">(</span>
    <span class="n">readTabulatedControlIncrementAerodynamicCoefficientsFromFiles</span><span class="p">(</span> <span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">,</span> <span class="n">controlSurfaceIndependentVariableNames</span><span class="p">,</span> <span class="n">controlSurfaceName</span> <span class="p">)</span> <span class="p">);</span>

<span class="c1">// Create and set aerodynamic coefficients</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>For this example, only the drag coefficient is affected by the control surface deflections.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../accelerationSetup/index.html" class="btn btn-neutral float-right" title="4. Acceleration Set-Up" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="validTimeRange.html" class="btn btn-neutral" title="3.2. Environment Valid Time-range" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Alejandro Gonzalez Puerta.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>